System.register(["./index-legacy-a07f5357-1754566720969-2.js","./cloneDeep-legacy-83e63578-1754566720969-2.js","./http-legacy-5140aa35-1754566720969-2.js","./local-legacy-e5a382dc-1754566720969-2.js","./index-legacy-2aa8cf39-1754566720969-2.js","./isObjectLike-legacy-72f9588d-1754566720969-2.js","./colors-legacy-bd80c34e-1754566720969-2.js","./isVisible-legacy-6dabd3f4-1754566720969-2.js","./vnode-legacy-1e461255-1754566720969-2.js","./ResizeObserver.es-legacy-6f14f612-1754566720969-2.js","./_getTag-legacy-22bd6e56-1754566720969-2.js"],(function(e,a){"use strict";var t,o,r,l,n,s,i,c,u,d,p,g,m,f,h,v,b,y,C,w,x,S,N,O,k,z,L,P=document.createElement("style");return P.textContent='.list-container[data-v-6ad8a4a5]{padding:24px;height:calc(100vh - 110px)}.list-container[data-v-6ad8a4a5] .processing{border-radius:2px;background:#f5f6f9;box-sizing:border-box;border:1px solid #d9d9d9;padding:1px 8px;display:inline-block;font-family:Nunito;font-size:12px;font-weight:500;line-height:20px;font-variation-settings:"wght" 600;color:rgba(0,0,0,.85)}.list-container[data-v-6ad8a4a5] :where(.fl-pages .page-content .page-table){min-height:unset!important;height:calc(100% - 56px)}.list-container :where(.fl-pages .page-content .page-table) .fl-table[data-v-6ad8a4a5]{height:100%!important}.list-container[data-v-6ad8a4a5] :where(.fl-pages .page-content .page-table .fl-table){height:100%!important}.list-container[data-v-6ad8a4a5] :where(.special-text){color:#3e54ad;cursor:pointer}.list-container[data-v-6ad8a4a5] :where(.cricle-dots){display:inline-block;width:6px;height:6px;border-radius:6px;margin-right:8px}.list-container[data-v-6ad8a4a5] .fl-collect .content-title .content-title-left{margin-right:0!important}.list-container[data-v-6ad8a4a5] .dropdown-card .fl-dropdown.iflorens-ui-dropdown-trigger .content{font-size:16px;padding:0!important}\n',document.head.appendChild(P),{setters:[e=>{t=e.d,o=e.r,r=e.j,l=e.am,n=e.z,s=e.ao,i=e.o,c=e.c,u=e.f,d=e.n,p=e.u,g=e.G,m=e.bN,f=e.m,h=e.b,v=e.a,b=e.t,y=e.ak,C=e.bx,w=e.ca,x=e.V,S=e.c2,N=e._},e=>{O=e.c},e=>{k=e.f},e=>{z=e.s},e=>{L=e._},()=>{},()=>{},()=>{},()=>{},()=>{},()=>{}],execute:function(){function a(e){return k({url:"/sone-crm/api/v0/customer/customer-select",method:"post",data:e})}const P=[{labelName:"Customer Group",labelAlign:"left",tip:"",value:"",key:"customerGroup",operatorOptions:{operator:"in",options:["in"]},propsData:{customeRender:!0,columns:[{title:"Customer Group",dataIndex:"customerGroup"}],fieldNames:{label:"customerGroup",value:"customerGroup"},selectProps:{responseData:"data.data",searchValue:"fuzzy"},selectParam:{},request:function(e){return k({url:"/sone-crm/api/v0/customer/customer-group-select",method:"post",data:e})},options:[],dropdownMatchSelectWidth:!0,value:[]}},{labelName:"Customer ID",labelAlign:"left",tip:"",value:"",key:"customerCode",operatorOptions:{operator:"in",options:["in"]},propsData:{customeRender:!0,columns:[{title:"Customer ID",dataIndex:"customerCode"},{title:"Legal Name",dataIndex:"customerName"}],fieldNames:{label:"customerCode",value:"customerCode"},selectProps:{responseData:"data.data",searchValue:"fuzzy"},selectParam:{},request:a,options:[],dropdownMatchSelectWidth:!0,value:[]}},{labelName:"Legal Name",labelAlign:"left",tip:"",value:"",key:"customerName",operatorOptions:{operator:"begins with",options:["begins with"]},propsData:{customeRender:!0,columns:[{title:"Customer ID",dataIndex:"customerCode"},{title:"Legal Name",dataIndex:"customerName"}],primaryKey:"customerName",fieldNames:{label:"customerName",value:"customerName"},selectProps:{responseData:"data.data",searchValue:"fuzzy"},selectParam:{},request:a,options:[],dropdownMatchSelectWidth:!0,value:[]}},{labelName:"Nature of Business",labelAlign:"left",tip:"",value:"",key:"natureOfBusiness",operatorOptions:{operator:"contains",options:["contains"]},propsData:{optionLabelProp:"children",options:[{label:"Shipping Service",value:"Shipping Service",key:"Shipping Service"},{label:"Freight Forwarding Service",value:"Freight Forwarding Service",key:"Freight Forwarding Service"},{label:"Shipping Agency",value:"Shipping Agency",key:"Shipping Agency"},{label:"Container Trading & Leasing",value:"Container Trading & Leasing",key:"Container Trading & Leasing"},{label:"Tank Operating",value:"Tank Operating",key:"Tank Operating"},{label:"Others",value:"Others",key:"Others"}],value:[],dropdownMatchSelectWidth:!0}},{labelName:"KAM",labelAlign:"left",tip:"",value:"",key:"accountOwner",operatorOptions:{operator:"in",options:["in"]},propsData:{customeRender:!0,columns:[{title:"login Name",dataIndex:"loginName"},{title:"User Name",dataIndex:"loginNameCn"}],fieldNames:{label:"loginName",value:"loginName"},selectProps:{responseData:"data.data",searchValue:"fuzzy"},selectParam:{},request:function(e){return k({url:"/sone-crm/api/v0/customer/kam-select",method:"post",data:e})},options:[],dropdownMatchSelectWidth:!0,value:[]}}],A={class:"list-container"},D=["onClick"],j={class:"dropdown-card"};function T(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!y(e)}e("default",N(t({__name:"accounts-list",setup(e){const a=o(z("get","accountsList-search-params",{})),{open:t,close:y}=S(),N=o(!1),I=o("My Accounts"),R=o(["All Accounts","Recently Viewed","My Accounts"]),B=r(),V=o({controls:O(P)}),q=o([{title:"Customer Group",field:"customerGroup",sortable:!0,width:133},{title:"Customer ID",field:"customerCode",sortable:!0,slots:{default:"customerCode"},width:130},{title:"Legal Name",field:"customerName",sortable:!0,width:212},{title:"Nature of Business",field:"natureOfBusiness",sortable:!0,minWidth:330,showOverflow:"false",slots:{default:({row:e})=>{if(e.natureOfBusiness&&"-"!==e.natureOfBusiness){const a=e.natureOfBusiness.split(",").map((e=>e.trim()));return a.length>2?[...a.slice(0,2).map((e=>u(f("flTag"),{className:"processing",style:"margin-right: 4px;"},T(e)?e:{default:()=>[e]}))),u(f("a-tooltip"),{placement:"top",content:u("div",null,[a.slice(3).map((e=>u(f("flTag"),{className:"processing",style:"margin-right: 4px;"},T(e)?e:{default:()=>[e]})))])},{default:()=>[u("span",{style:"margin-right: 4px;"},[h("+ "),a.length-2])]})]:a.map((e=>u(f("flTag"),{className:"processing",style:"margin-right: 4px;"},T(e)?e:{default:()=>[e]})))}return"-"}}},{title:"KAM",field:"accountOwner",sortable:!0,width:120,slots:{default:"accountOwner"}}]),E=l({loading:!1,border:"none",stripe:!0,align:null,showHeaderOverflow:!0,showOverflow:"tooltip",size:"small",height:"100%",sortConfig:{remote:!0,multiple:!1},columnConfig:{resizable:!0},scrollX:{enabled:!0},scrollY:{enabled:!0},rowConfig:{height:40,isHover:!0},seqConfig:{filterConfig:{remote:!0}},pagerConfig:{currentPage:1,pageSize:20,total:0,layouts:["Total","PrevPage","JumpNumber","NextPage","Sizes"]},columns:[...q.value],data:[]}),G=o([]),M=e=>{const a=[{label:"All Accounts",value:"ALL"},{label:"Recently Viewed",value:"HISTORY"},{label:"My Accounts",value:"OWNER"}];return a.find((a=>a.label===e))?a.find((a=>a.label===e)):a.find((a=>a.value===e))},_=e=>{E.loading=!0;const t={...a.value,page:{currentPage:E.pagerConfig.currentPage,pageSize:E.pagerConfig.pageSize},sort:G.value};var o;t.queryType=e||M(I.value).value,z("set","accountsList-search-params",t),z("set","accountsList-search-form",V.value),(o=t,k({url:"/sone-crm/api/v0/customer/customer-list",method:"post",data:o})).then((e=>{e.data.data.forEach((e=>{e.customerGroup=e.customerGroup||"-",e.natureOfBusiness=e.natureOfBusiness||"-",e.salesSupport=e.salesSupport||"-"})),E.data=e.data.data,E.pagerConfig.total=e.data.totalRecord,E.pagerConfig.pageSize=e.data.pageSize})).finally((()=>{E.loading=!1}))},W=()=>{_()},F={sortChange(e){G.value=e.sortList.map((e=>({field:e.field,order:e.order}))),_()}},U=()=>{V.value={controls:O(P)},z("set","accountsList-search-params",""),z("set","accountsList-search-form",""),a.value="",G.value=[],E.pagerConfig.currentPage=1,E.pagerConfig.pageSize=20,_()},H=e=>{a.value=e,E.pagerConfig.currentPage=1,_()},K=e=>{E.pagerConfig.currentPage=e?.currentPage,E.pagerConfig.pageSize=e?.pageSize,_()},Y=e=>{g((()=>{E.columns=e}))},J=(e,a)=>{E.columns=a.filter((a=>e.includes(a.title))),q.value=a},{proxy:X}=x(),$=e=>{N.value||(t("accountsList"),N.value=!0,function(e){return k({url:"/sone-crm/api/v0/customer/export-customer-list",method:"post",data:e,responseType:"blob",headers:{"Content-Type":"application/json;charset=utf-8",Accept:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"},timeout:3e5})}(e).then((async e=>{y("accountsList"),N.value=!1;const a=window.URL.createObjectURL(new Blob([e])),t=document.createElement("a");t.href=a,t.download="CRM Accounts.xlsx",document.body.appendChild(t),t.click(),t.remove()})).catch((()=>{y("accountsList"),N.value=!1})))},Q=()=>{const e={queryType:M(I.value).value,...a.value,page:{currentPage:E.pagerConfig.currentPage,pageSize:E.pagerConfig.pageSize},sort:G.value};$(e)},Z=()=>{document.querySelectorAll(".iflorens-ui-select-dropdown, .iflorens-ui-picker-dropdown").forEach((e=>{e.style.display="none"}))};return n((()=>{const e=document.querySelector(".page-middle");e&&e.addEventListener("scroll",Z);const a=B.query.view;if(a)return _(a),void(I.value=M(a).label);_()})),s((()=>{const e=document.querySelector(".page-middle");e&&e.removeEventListener("scroll",Z)})),(e,a)=>{const t=C,o=w,r=L,l=m;return i(),c("div",A,[u(l,{title:"",searchWidth:300,isShowCollectBtn:!1,isShowExportBtn:!1,headerDraggableDisabledArr:["Customer ID"],headerDisabled:["Customer ID"],form:V.value,"onUpdate:form":a[1]||(a[1]=e=>V.value=e),gridOptions:E,gridEvents:F,tableColumns:q.value,formSaveParam:{searchType:"accountsList"},fetch:p(k),onReset:U,onSearch:H,onPageChange:K,onDragableChange:J,onTableFieldChange:Y},{customerCode:d((({row:e})=>[v("span",{class:"special-text",onClick:a=>(e=>{X.$goPage("/crm/accounts/detali",{id:e.id,from:"V4",view:M(I.value).value})})(e)},b(e.customerCode),9,D)])),accountOwner:d((({row:e})=>[h(b(e.userName||"-"),1)])),"collect-default":d((()=>[v("div",j,[u(t,{onChange:W,modelValue:I.value,"onUpdate:modelValue":a[0]||(a[0]=e=>I.value=e),options:R.value,trigger:["click"],isShowDelIcon:!1},null,8,["modelValue","options"])])])),"table-top-left":d((()=>[u(r,{placement:"top"},{title:d((()=>a[2]||(a[2]=[v("span",null,"Export",-1)]))),default:d((()=>[u(o,{loading:N.value,onBtnClick:Q},{default:d((()=>a[3]||(a[3]=[h("Export")]))),_:1},8,["loading"])])),_:1})])),_:1},8,["form","gridOptions","tableColumns","fetch"])])}}}),[["__scopeId","data-v-6ad8a4a5"]]))}}}));
